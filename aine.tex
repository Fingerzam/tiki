% --- Template for thesis / report with tktltiki2 class ---

\documentclass[finnish]{tktltiki2}

% tktltiki2 automatically loads babel, so you can simply
% give the language parameter (e.g. finnish, swedish, english, british) as
% a parameter for the class: \documentclass[finnish]{tktltiki2}.
% The information on title and abstract is generated automatically depending on
% the language, see below if you need to change any of these manually.
% 
% Class options:
% - grading                 -- Print labels for grading information on the front page.
% - disablelastpagecounter  -- Disables the automatic generation of page number information
%                              in the abstract. See also \numberofpagesinformation{} command below.
%
% The class also respects the following options of article class:
%   10pt, 11pt, 12pt, final, draft, oneside, twoside,
%   openright, openany, onecolumn, twocolumn, leqno, fleqn
%
% The default font size is 11pt. The paper size used is A4, other sizes are not supported.
%
% rubber: module pdftex

% --- General packages ---

\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{amsfonts,amsmath,amssymb,amsthm,booktabs,color,enumitem,graphicx}
\usepackage[pdftex,hidelinks]{hyperref}

\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{graphs, graphs.standard}
\usetikzlibrary{arrows}

% Automatically set the PDF metadata fields
\makeatletter
\AtBeginDocument{\hypersetup{pdftitle = {\@title}, pdfauthor = {\@author}}}
\makeatother

% --- Language-related settings ---
%
% these should be modified according to your language

% babelbib for non-english bibliography using bibtex
\usepackage[fixlanguage]{babelbib}
\selectbiblanguage{finnish}

% add bibliography to the table of contents
\usepackage[nottoc,numbib]{tocbibind}
% tocbibind renames the bibliography, use the following to change it back
\settocbibname{Lähteet}

% --- Theorem environment definitions ---

\newtheorem{lau}{Lause}
\newtheorem{lem}[lau]{Lemma}
\newtheorem{kor}[lau]{Korollaari}

\theoremstyle{definition}
\newtheorem{maar}[lau]{Määritelmä}
\newtheorem{ong}{Ongelma}
\newtheorem{alg}[lau]{Algoritmi}
\newtheorem{esim}[lau]{Esimerkki}

\theoremstyle{remark}
\newtheorem*{huom}{Huomautus}

\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\nat}{\mathbb{N}}
\newcommand{\powerset}{\mathcal{P}}

\newcommand{\from}{\colon}
\newcommand{\compose}{\circ}

\DeclareMathOperator{\id}{ID}

\DeclareMathOperator{\head}{head}
\DeclareMathOperator{\tail}{tail}

\DeclareMathOperator{\DL}{DL}

\newcommand{\cycleGraph}[2]
{
\begin{tikzpicture}
    \draw circle [radius=#1];
    \graph [nodes={draw, circle,fill=white}, clockwise, radius=#1, empty nodes]{
        subgraph I_n [n = #2]
    };
\end{tikzpicture}
}

\newcommand{\Dsn}{D_{s,n}}
\newcommand{\Dssn}{D_{s+1,n}}



% --- tktltiki2 options ---
%
% The following commands define the information used to generate title and
% abstract pages. The following entries should be always specified:

\title{Paikallisuus hajautetuissa verkkoalgoritmeissa}
\author{Juhana Laurinharju}
\date{\today}
\level{Tieteellinen kirjoittaminen}
\abstract{Tiivistelmä.}

% The following can be used to specify keywords and classification of the paper:

%\keywords{avainsana 1, avainsana 2, avainsana 3}
%\classification{} % classification according to ACM Computing Classification System (http://www.acm.org/about/class/)
                  % This is probably mostly relevant for computer scientists

% If the automatic page number counting is not working as desired in your case,
% uncomment the following to manually set the number of pages displayed in the abstract page:
%
% \numberofpagesinformation{16 sivua + 10 sivua liitteissä}
%
% If you are not a computer scientist, you will want to uncomment the following by hand and specify
% your department, faculty and subject by hand:
%
% \faculty{Matemaattis-luonnontieteellinen}
% \department{Tietojenkäsittelytieteen laitos}
% \subject{Tietojenkäsittelytiede}
%
% If you are not from the University of Helsinki, then you will most likely want to set these also:
%
% \university{Helsingin Yliopisto}
% \universitylong{HELSINGIN YLIOPISTO --- HELSINGFORS UNIVERSITET --- UNIVERSITY OF HELSINKI} % displayed on the top of the abstract page
% \city{Helsinki}
%


\begin{document}

% --- Front matter ---

\maketitle        % title page
%\makeabstract     % abstract page

%\tableofcontents  % table of contents
\newpage          % clear page after the table of contents


% --- Main matter ---

\section{Johdanto}

\section{Määritelmiä}

\subsection{Verkko}

\emph{Suuntaamaton verkko} on pari $G = (V,E)$, missä $V$ on \emph{solmujoukko}
ja $E$ on \emph{kaarijoukko}. \emph{Kaari} solmusta $v \in V$ solmuun $u \in V$
on kaksikko $\set{v,u} \in E$. Kaarta voidaan myös merkitä lyhyemmin $vu$.
Esimerkiksi verkko $G = (V,E)$, missä
%
\begin{align*}
    V &= \set{a,b,c,d} \text{ ja}\\
    E &= \set{ \set{a,b}, \set{b,c}, \set{c,a}, \set{a,d}} \\
      &= \set{ab, bc, ca, ad}
\end{align*}
%
näyttää seuraavalta
%
\begin{center}
    \begin{tikzpicture}
        \graph[nodes={circle, draw, minimum size=7mm}, clockwise]{
            subgraph C_n [V={a,b,c}];
            a -- d[x=2, y=0];
        };
    \end{tikzpicture}
\end{center}

\subsection{Laskennan malli}

Olkoon $G = (V,E)$ suuntaamaton verkko. Verkon jokaisessa solmussa $v \in V$ on
tietokone. Laskenta koostuu \emph{kommunikaatiokierroksista}. Yhden
kommunikaatiokierroksen aikana jokainen solmu voi:

\begin{enumerate}
    \item suorittaa mielivaltaista laskentaa
    \item lähettää viestin jokaiselle naapurilleen
    \item vastaanottaa naapureiden lähettämät viestit
\end{enumerate}

Lisäksi jokaiselle solmulle $v \in V$ on annettu yksikäsitteinen tunniste
$\id(v) \in \set{1,\dots,|V|}$. Laskennan päätyttyä jokaisen solmun tulee
tietää oma tulosteensa.

TODO: motivointia sille, että tarkastellaan vain kommunikaatiokierrosten
lukumäärää aikavaativuutena.

\subsection{Verkon väritys}

Verkko on \emph{väritetty}, jos jokaiseen solmuun $v \in V$ on liitetty jokin
\emph{väri} $c(v) \in \nat$ ja kahdella vierekkäisellä solmulla ei koskaan ole
samaa väriä.  Tarkemmin, verkon $G = (V,E)$ \emph{solmuväritys} on kuvaus $c :
V \rightarrow \set{1,\dots,k}$ jollain luonnollisella luvulla $k \in \nat$.
Lisäksi vaaditaan, että jos verkossa on kaari solmusta $v$ solmuun $u$, eli $vu
\in E$, niin $c(v) \neq c(u)$.

Verkon voi värittää $k$:lla värillä jos löytyy yllä olevan ehdon täyttävä
kuvaus $c : V \rightarrow \set{1,\dots,k}$. Tällaista väritystä kutsutaan
\emph{$k$-väritykseksi}.

\definecolor{color1}{RGB}{166, 206, 227}
\definecolor{color2}{RGB}{31, 120, 180}
\definecolor{color3}{RGB}{178, 223, 138}
\definecolor{color4}{RGB}{51, 160, 4}

\begin{center}
    \begin{tikzpicture}[nodes={draw, circle, inner sep=.13cm}]
        \node [fill=color1] (a1) at (0,0)       {};
        \node [fill=color1] (a2) at (1,0)       {};
        \node [fill=color2] (a3) at (0,1)       {};
        \node [fill=color3] (a4) at (1,1.5)     {};
        \node [fill=color2] (a5) at (2,0.75)    {};
        \node [fill=color1] (a6) at (3,1.5)     {};
        \node [fill=color3] (a7) at (3,0)       {};
        \node [fill=color4] (a8) at (3.75,0.75) {};

        \graph {
            (a3) -- {(a1), (a2), (a4)},
            (a4) -- {(a2), (a5)},
            (a5) -- {(a2), (a6), (a7)},
            (a8) -- {(a5), (a6), (a7)},
            (a4) -- (a6)
        };
    \end{tikzpicture}
\end{center}

Jos verkkoa väritetään hajautetulla algoritmilla, niin jokaisen solmun tulee
tietää oma värinsä laskennan päätyttyä.

\subsection{Sykli}

Verkko on \emph{sykli}, jos se on yhtenäinen ja sen jokaisella solmulla on
tasan kaksi naapuria.
%
\begin{center}
    \begin{tabular}{ccc}
        \cycleGraph{.95cm}{6} & \cycleGraph{.95cm}{3} & \cycleGraph{.95cm}{9} \\
    \end{tabular}
\end{center}
%
Tarkemmin sanoen, $n$-sykli, missä $n \geq 3$, on verkko $C_n = (V,E)$ jolla
%
\begin{align*}
    V &= \set{v_1, v_2, \dots, v_n} \\
    E &= \set{v_iv_{i+1} \mid 1 \leq i < n} \cup \set{v_n v_1}
\end{align*}
%

Syklin voi aina värittää kolmella värillä.

TODO: tälle lähde?

\begin{center}
    \begin{tikzpicture}
        \draw circle [radius=.95cm];
        \graph [simple,nodes={draw, circle,fill=white}, clockwise, radius=.95cm, n=7, empty nodes]{
            1 [fill=color1];
            2 [fill=color2];
            3 [fill=color1];
            4 [fill=color2];
            5 [fill=color1];
            6 [fill=color2];
            7 [fill=color3];
        };
    \end{tikzpicture}
\end{center}

\subsection{Iteroitu logaritmi $\log^*$}

\emph{Iteroitu logaritmi} $\log^*$ kertoo kuinka monta kertaa luvusta täytyy ottaa
logaritmi, kunnes lopputulos on korkeintaan yksi. Tarkemmin,

\begin{equation*}
    \log^* x =
      \begin{cases}
          0,                   &\text{jos } x \leq 1, \\
          1 + \log^* (\log x), &\text{muutoin.}
      \end{cases}
\end{equation*}

Esimerkiksi
%
\begin{align*}
    \log^* 16 &= \log^* 2^{2^2} = 1 + \log^* 2^2 \\
              &= 2+ \log^* 2 = 3 + \log^* 1 = 3 \\
\intertext{ja}
    \log^* 65536 &= \log^* 2^{2^{2^2}} = 1 + \log^* 16 \\
                 &= 4,
\end{align*}
%
joten $\log^* n$ on arvoltaan pienempi kuin 5 kun $n < 2^{65536}$. Iteroitu
logaritmi on siis äärimmäisen hitaasti kasvava funktio.

\subsection{Näkymä}

\begin{maar}
    Verkon $G$ \emph{polku} on jono $P = (p_1, \dots, p_n)$, missä jokainen
    $p_i \in V(G)$ on verkon $G$ solmu ja lisäksi kahden jonon perättäisen
    solmun välillä täytyy aina olla kaari. Siis kaikilla $i \in \set{1, \dots,
        n-1}$ täytyy olla voimassa ehto $u_i u_{i+1} \in E(G)$. Polku $P$ on
    polku solmusta $p_1$ solmuun $p_n$.
\end{maar}

TODO: kuva polusta

\begin{maar}
    Polun $P = (p_1, \dots, p_n)$ pituus on sen kaarten lukumäärä. Siis polun
    $P$ pituus on $n-1$.
\end{maar}

TODO: kuvan polun pituus

\begin{maar}
    Kahden verkon $G$ solmun $u,v \in V(G)$ välinen \emph{etäisyys} verkossa
    $G$, $d_G(u,v)$, on lyhimmän solmusta $u$ solmuun $v$ kulkevan polun pituus.
\end{maar}

TODO: tarvitaanko notaatiota $d_G(u,v)$?

TODO: kuva lyhimmästä polusta ja etäisyydestä

Hajautetussa algoritmissa solmu $v \in V$ saa $k$:ssa kierroksessa selville
oman $k$-ympäristönsä. Toisaalta solmu ei pysty tässä ajassa saamaan mitään
selville solmuista, joiden etäisyys $v$:stä on yli $k$.

TODO: kuvasarja havainnollistamaan tätä

Hajautettu algoritmi, jonka ajoaika on $k$ kierrosta on siis funktio, jonka
lähtöjoukkona on solmujen mahdolliset $k$-ympäristöt.

TODO: tää kaipaa varmaan vähän selvennystä

Erityisesti syklissä algoritmi, jonka ajoaika on $k$ kierrosta, tekee
päätöksensä $k$:n edeltäjän, $k$:n seuraajan ja oman tunnisteensa perusteella.
Toisin sanoen solmun $v_l \in V(C_n)$ tuloste on funktio arvoilta
%
\begin{equation*}
    \left(
        \id(v_{l-k}), \id(v_{l-k+1}), \dots,
        \id(v_{l-1}), \id(v_l), \id(v_{l+1}), \dots, \id(v_{l+k})
    \right),
\end{equation*}
%
Missä yhteen- ja vähennyslaskut suoritetaan modulo $n$.

TODO: Kuvasarja solmun näkymästä syklissä.

Erityisesti jos algoritmi tuottaa 3-värityksen syklissä $k$:ssa kierroksessa,
niin täytyy olla olemassa sellainen funktio $f: [n]^{2k+1} \to [3]$, joka
tuottaa laillisen 3-värityksen riippumatta siitä miten solmuille on annettu
tunnisteet.

\subsection{Naapurustoverkot}

TODO: liitä tää syklien näkymiin

Naapurustoverkko $B_{t,n} = (V,E)$, missä $V$ on kaikkien vektoreiden
$(x_1,\dots,x_{2t+1})$ joukko joilla $x_i$:t ovat keskenään erisuuria
kokonaislukuja joukosta $[n]$. Verkossa $B_{t,n}$ solmut muotoa
%
\begin{equation*}
    (x_1, \dots, x_{2t+1}) \text{ ja } (y,x_2,\dots,x_{2t})
\end{equation*}
%
ovat naapureita, kun $y \neq x_{2t+1}$.

TODO: esittele $[n]$ merkintä, tai älä käytä sitä ollenkaan

TODO: pari kuvaa näistä verkoista pienillä parametrien arvoilla

\begin{maar}
    Solmun $v \in V(G)$ \emph{asteluku} on sen naapureiden lukumäärä verkossa
    $G$. Tarkemmin, solmun $v \in V(G)$ asteluku on $|\set{e \in E(G) \mid v
        \in e}|$.
\end{maar}

Verkossa $B_{t,n}$ on $n(n-1)(n-2) \cdots (n-2t)$ solmua ja sen kaikkien
solmujen asteluku on $2(n-2t-1)$.

TODO: onko asteluvusta puhuminen olennaista?

TODO: epäkonsistenttia: kierrosmäärä on välillä $k$ ja välillä $t$

Hajautettu algoritmi, joka 3-värittää syklin
$t$ kierroksessa on funktio $c : V(B_{t,n}) \to [3]$.

TODO: tätä vois perustella

Nyt $c$ on myös laillinen 3-väritys verkolle $B_{t,n}$, sillä jos $c$ antaa
solmuille
%
\begin{equation*}
    (x_1, \dots, x_{2t}, x_{2t+1}) \text{ ja } (y,x_1,\dots,x_{2t})
\end{equation*}
%
saman värin, niin se antaa myös syklissa kahdelle vierekkäiselle solmulle saman
värin kun syklissä esiintyy pätkä
%
\begin{equation*}
    y, x_1, x_2, \dots, x_{2t+1}.
\end{equation*}

Siis jos näytetään, että verkkoa $B_{t,n}$ ei voi 3-värittää, niin ei voi
myöskään olla hajautettua algoritmia joka värittäisi $n$-syklin kolmella
värillä $t$ kierroksessa.

\subsection{Suunnattu verkko}

\emph{Suunnatto verkko} $G = (V,E)$ on verkko, jossa kaarilla on suunta.
Suunnatussa verkossa on kaari solmusta $u \in V$ solmuun $v \in V$ jos $(u,v)
\in E$. Suunnatulla kaarella $e = (u,v) \in E$ on \emph{kärki}
%
\begin{equation*}
    \head(e) = v
\end{equation*}
%
ja \emph{häntä}
%
\begin{equation*}
    \tail(e) = u
\end{equation*}

TODO: onks kärki ja häntä oikeet käännökset?

TODO: kuva suunnatusta verkosta ja havainnollistava kuva kärjestä ja hännästä

\subsection{Väritysluku $\chi(G)$}

Verkon $G$ väritysluku $\chi(G)$ on pienin määrä värejä, jolla sen voi värittää.

\section{Sykliä ei voi 3-värittää alle $\log^* n$ kierroksessa}

Väritysluvun $\chi(B_{t,n})$ alaraja todistetaan käyttäen suunnattujen
verkkojen $\Dsn$ perhettä. Suunnatut verkot $\Dsn$ liittyvät läheisesti
naapurustoverkkoihin $B_{t,n}$. Verkon $\Dsn$ solmujoukon $V$ muodostavat
kaikki vektorit muotoa
%
\begin{equation*}
    (a_1,a_2,\dots,a_s),
\end{equation*}
%
joilla pätee
%
\begin{equation*}
    1 \leq a_1 < a_2 < \dots < a_s \leq n.
\end{equation*}

Solmusta $(a_1,\dots,a_s)$ lähtee kaari muotoa
%
\begin{equation*}
    (a_2,\dots,a_s,b)
\end{equation*}
%
oleviin solmuihin, joilla $a_s < b \leq n$.

Nyt naapurustoverkko $B_{t,n}$ pitää sisällään aliverkkona suunnatun verkon
$D_{2t+1,n}$.

TODO: avaa tätä

TODO: pitäskö aliverkko määritellä?

Tästä erityisesti seuraa, että $\chi(B_{t,n}) \geq \chi(D_{2t+1})$.

TODO: selvennä tätä



\subsection{Suunnatun verkon kaariverkko}

Suunnatun verkon $G$ \emph{kaariverkko} $\DL(G)$ on verkko, jonka solmuja ovat
alkuperäisen verkon $G$ kaaret ja kahden kaariverkon solmun
%
\begin{equation*}
    u,v \in V(\DL(G)) = E(G)
\end{equation*}
%
välillä on kaari, jos $\head(u) = \tail(v)$.

TODO: havainnollistava kuva

Tarkemmin ilmaistuna,
%
\begin{align*}
    V(\DL(G)) &= E(G) \\
    E(\DL(G)) &= \set{(v,u) \in E(G) \times E(G) \mid \head(v) = \tail(u)}.
\end{align*}


\begin{lem}
    $D_{1,n}$ on $n$:n solmun täydellinen verkko, jossa kaaret on suunnattu pienemmästä solmusta isompaan.
\end{lem}

\begin{proof}
    Verkon $\Dsn$ määritelmä $s$:n arvolla $1$ antaa seuraavan verkon:
    %
    \begin{align*}
        V(D_{1,n}) &= \set{(k) \mid 1 \leq k \leq n} \\
        E(D_{1,n}) &= \set{((k), (l)) \mid k < l}.
    \end{align*}
    %
    Tässä verkossa jokaisen kahden solmun välillä on kaari tasan yhteen
    suuntaan.
\end{proof}

\begin{maar}
    Kaksi suunnattua verkkoa $G$ ja $H$ ovat \emph{isomorfiset} jos niiden
    solmujoukkojen välillä on olemassa kuvaus $\varphi \from V(G) \to V(H)$
    joka toteuttaa seuraavat ehdot
    %
    \begin{enumerate}
        \item $\varphi$ on bijektio
        \item $(u,v) \in E(G)$ jos ja vain jos $(\varphi(u), \varphi(v)) \in
            E(H)$.
    \end{enumerate}
    %
    Nämä ehdot toteuttavaa kuvausta kutsutaan \emph{isomorfismiksi}.
\end{maar}

\begin{lem}
    Verkko $\Dssn$ on verkon $\Dsn$ kaariverkko. Tarkemmin,
    %
    \begin{equation*}
        \Dssn = \DL(\Dsn).
    \end{equation*}
\end{lem}

\begin{proof}
    Ideana on samaistaa kaariverkon $\DL(\Dsn)$ kaari
    %
    \begin{equation*}
        \big(
            (x_1, \dots, x_s), (x_2, \dots, x_s, y)
        \big)
    \end{equation*}
    %
    verkon $\Dssn$ solmun $(x_1, \dots, x_s, y)$ kanssa. Määritellään
    siis verkkojen välille kuvaus
    %
    \begin{equation*}
        \varphi \colon V(\DL(\Dsn) \to V(D_{s + 1, n})
    \end{equation*}
    %
    asettamalla
    %
    \begin{equation*}
        \varphi\big(
                   (x_1, \dots, x_s), (x_2, \dots, x_s, y)
               \big) = (x_1, \dots, x_s, y).
    \end{equation*}

    Näytetään, että $\varphi$ on isomorfismi. Ensinnäkin $\varphi$ on bijektio,
    sillä sille löytyy seuraava käänteiskuvaus $\psi \from \Dssn \to
    \DL(\Dsn)$:
    %
    \begin{equation*}
        \psi(x_1, \dots, x_n, x_{n+1}) =
        \big(
            (x_1, \dots, x_n), (x_2, \dots, x_{n+1})
        \big).
    \end{equation*}
    %
    Kuvaus $\psi$ on kuvauksen $\varphi$ käänteiskuvaus, sillä
    %
    \begin{align*}
        (\psi \compose \varphi)\big(
                                   (x_1, \dots, x_n), (x_2, \dots, x_n, y)
                               \big)
            &= \psi\big(
                       \varphi\big(
                                  (x_1, \dots, x_n), (x_2, \dots, x_n, y)
                              \big)
                   \big) \\
            &= \psi(x_1, \dots, x_n, y) \\
            &= \big(
                   (x_1, \dots, x_n), (x_2, \dots, x_n, y)
               \big) \\
\intertext{ja}
        (\varphi \compose \psi)(x_1, \dots, x_n, x_{n+1})
            &= \varphi\big(
                          \psi(x_1, \dots, x_n, x_{n+1})
                      \big) \\
            &= \varphi\big(
                          (x_1, \dots, x_n), (x_2, \dots, x_n, x_{n+1})
                      \big) \\
            &= (x_1, \dots, x_n, x_{n+1}).
    \end{align*}
    %
    Vielä täytyy näyttää, että kuvaus toteuttaa isomorfiaehdon. Olkoon
    %
    \newcommand{\x}{\bar{x}}
    \newcommand{\y}{\bar{y}}
    %TODO: korjaa tasaukset nätimmiks?
    \begin{align*}
        \x_1 &= (x_1, \dots, x_n)     \in V(\Dsn), \\
        \x_2 &= (x_2, \dots, x_{n+1}) \in V(\Dsn), \\
        \y_1 &= (y_1, \dots, y_n)     \in V(\Dsn) \text{ ja} \\
        \y_2 &= (y_2, \dots, y_{n+1}) \in V(\Dsn)
    \end{align*}
    %
    verkon $\Dsn$ solmuja. Tällöin erityisesti
    %
    \begin{align*}
        (\x_1,\x_2) &\in V(\DL(\Dsn)) \text{ ja} \\
        (\y_1,\y_2) &\in V(\DL(\Dsn))
    \end{align*}
    %
    ovat kaariverkon $\DL(\Dsn)$ solmuja. Jos $\big((\x_1, \x_2), (\y_1, \y_2)\big) \in
    E(\DL(\Dsn))$ on kaariverkon $\DL(\Dsn)$ kaari, niin kaariverkon määritelmän nojalla
    %
    \begin{align*}
        & \head\big((\x_1,\x_2)\big) = \tail\big((\y_1, \y_2)\big) & \implies \\
        & \x_2 = \y_1                                              & \implies \\
        & (x_2, \dots, x_{n+1}) = (y_1, \dots, y_n)                & \implies \\
        & y_1 = x_2, \dots \text{ ja } y_n = x_{n+1}.              &
    \end{align*}
    %
    Koska $\x_1 \in V(\Dsn)$ ja $\y_2 \in V(\Dsn)$, niin
    $x_1 < y_1 = x_2$ ja $y_n < y_{n+1}$. Tällöin
    %
    \begin{align*}
        \big(
            \varphi(\x_1, \x_2), \varphi(\y_1, \y_2)
        \big)
            &= \big(
                   (x_1, \dots, x_{n+1}), (y_1, \dots, y_{n+1})
               \big) \\
            &= \big(
                   (x_1, y_1, y_2, \dots, y_n), (y_1, \dots, y_{n+1})
               \big) \in E(\Dssn).
    \end{align*}
    %
    Ollaan siis näytetty ensimmäinen kahdesta implikaatiosta:
    %
    \begin{equation*}
        \big((\x_1, \x_2), (\y_1, \y_2)\big) \in E(\DL(\Dsn)) \implies
        \big(\varphi(\x_1, \x_2), \varphi(\y_1, \y_2) \big) \in E(\Dssn).
    \end{equation*}

    Toisaalta jos
    %
    \begin{align*}
        \x &= (x_1, \dots, \x_{n+1}) \in V(\Dssn) \text{ ja} \\
        \y &= (y_1, \dots, \y_{n+1}) \in V(\Dssn).
    \end{align*}
    %
    ovat verkon $\Dssn$ solmuja joiden välillä on kaari, eli $(\x, \y) \in
    E(\Dssn)$, niin tällöin
    %
    \begin{equation*}
        x_2 = y_1, \dots \text{ ja } x_{n+1} = y_n.
    \end{equation*}
    %
    Nyt
    %
    \begin{align*}
        \x_1 &= (x_1, \dots, x_n), \\
        \x_2 &= (x_2, \dots, x_{n+1}), \\
        \y_1 &= (y_1, \dots, y_n) \text{ ja } \\
        \y_2 &= (y_2, \dots, y_{n+1}) \\
    \end{align*}
    %
    ovat verkon $\Dsn$ solmuja joilla pätee
    %
    \begin{align*}
        (\x_1, \x_2) \in E(\Dsn) &\implies (\x_1, \x_2) \in V(\DL(\Dsn)) \text{ ja} \\
        (\y_1, \y_2) \in E(\Dsn) &\implies (\y_1, \y_2) \in V(\DL(\Dsn)).
    \end{align*}
    %
    Koska $\x_2 = \y_1$, niin kaariverkossa $\DL(\Dsn)$ on kaari
    %
    \begin{equation*}
        \big((\x_1, \x_2), (\y_1, \y_2)\big) \in E(\DL(\Dsn)).
    \end{equation*}
    %
    Koska
    %
    \begin{align*}
        (\x_1, \x_2) &= \varphi^{-1}(\x) \text{ ja} \\
        (\y_1, \y_2) &= \varphi^{-1}(\y)
    \end{align*}
    %
    niin väite on todistettu. Ollaan siis näytetty, että jos $(\x, \y) \in
    E(\Dssn)$ on verkon $\Dssn$ kaari, niin sen solmujen alkukuvien välillä on
    myös kaari. Tarkemmin sanottuna
    %
    \begin{equation*}
        (\x, \y) \in E(\Dssn) \implies \big(
                                           \varphi^{-1}(\x), \varphi^{-1}(\y)
                                       \big) \in E(\DL(\Dsn)).
    \end{equation*}

    Ollaan siis näytetty, että löytyy bijektio $\varphi \from V(\DL(\Dsn)) \to
    \Dssn$ joka toteuttaa isomorfiaehdon, joten verkot $\DL(\Dsn)$ ja $\Dssn$
    ovat isomorfisina olennaisesti sama verkko.
\end{proof}

TODO: todista erikseen, että $D_{2,n} = \DL(\D_{1,n})$?

Verkkojen $\Dsn$ välillä on nyt siis tarkkaan tunnettu yhteys, kun $s$:n arvot
vaihtelevat. Lisäksi verkko $D_{1,n}$ on rakenteeltaan yksinkertainen
täydellinen verkko. Koska täydellisessä verkossa on kaari verkon jokaisen
solmuparin välillä, täytyy sen jokaisella solmulla olla eri väri kuin millään
muulla solmulla. Siispä verkon $\D_{1,n}$ värittämiseen tarvitaan $n$ väriä.
Tarkemmin ilmaistuna,
%
\begin{equation*}
    \chi(D_{1,n}) = n.
\end{equation*}

TODO: pitäiskö äskeisen olla huomautus?

Seuraavan lemman avulla saadaan yhteys verkkojen $\Dsn$ ja $\Dssn$
värityslukujen välille.

\newcommand{\DLG}{\DL(G)}

\begin{lem}
    Olkoon $G$ kaariverkko. Tällöin
    %
    \begin{equation*}
        \chi(\DLG) \geq \log \chi(G).
    \end{equation*}
\end{lem}

\begin{proof}
    Olkoon $\Psi \from \DLG \to [k]$ kaariverkon $\DLG$ $k$-väritys. Koska
    verkko $\DLG$ on verkon $G$ kaariverkko, niin kuvaus $\Psi$ antaa
    jokaiselle verkon $G$ kaarelle värin. Jos $u, v \in E(G)$ ovat verkon $G$
    perättäisiä kaaria, eli $\head(u) = \tail(v)$, niin $\Psi$ antaa niille eri
    värit, $\Psi(u) \neq \Psi(v)$.

    Muodostetaan verkolle $G$ väritys $c \from G \to \powerset([k])$ joka
    värittää $G$:n $2^k$ värillä. Olkoon $x \in V(G)$ verkon $G$ solmu.
    Määritellään $x$:n väri seuraavasti:
    %
    \begin{equation*}
        c(x) = \set{\Psi(u) \mid \tail(u) = x}.
    \end{equation*}
    %
    Solmun $x$ väri on siis joukko, jossa on kaikkien solmusta $x$ lähtevien
    kaarten värit värityksessä $\Psi$. Jotta $c$ olisi laillinen väritys, se ei
    saa antaa samaa väriä kahdelle naapurisolmulle. Olkoon $u = (x,y) \in E(G)$
    verkon $G$ kaari ja siis $y \in V(G)$ solmun $x$ naapuri. Nyt $\tail(u) =
    x$, joten $u$:n väri kuuluu $x$:n värijoukkoon. Tarkemmin ilmaistuna,
    $\Psi(u) \in c(x)$. Toisaalta jos $\Psi(u) \in c(y)$, niin tällöin löytyy
    kaari $v \in E(G)$, joka lähtee solmusta $y$, eli $\tail(v) = y$ ja lisäksi
    jolle $\Psi$ antaa saman värin kuin $u$:lle, eli $\Psi(x) = \Psi(y)$. Tämä
    ei kuitenkaan ole mahdollista, sillä $\head(u) = y = \tail(v)$, jolloin
    $\Psi$ ei olisikaan laillinen verkon $\DLG$ väritys. Siis $c$ antaa
    vierekkäisille solmuille aina toisistaan eroavan värin, joten se täyttää
    väritysehdon.

    TODO: Yllä oleva kappale on pitkä, luettavuutta voisi parantaa ainakin
    siirtämällä jotain yhtälöympäristöön

    Väritys $c$ antaa verkon $G$ solmuille väriksi jonkin osajoukon värityksen
    $\Psi$ väreistä. Koska $k$:n alkion joukolla on yhteensä $2^k$ osajoukkoa,
    niin $c$ värittää verkon $G$ korkeintaan $2^k$ värillä.

    Ollaan siis näytetty, että jos verkon $G$ kaariverkon $\DLG$ voi värittää $k$:lla
    värillä, niin $G$:n voi värittää $2^k$ värillä. Toisin sanoen
    %
    \begin{align*}
        \chi(G) &\leq 2^{\chi(\DLG)} \implies \\
        \log \chi(G) &\leq \chi(\DLG)
    \end{align*}
\end{proof}

\begin{kor}
    \begin{equation*}
        \chi(\Dssn) \geq \log \chi(\Dsn).
    \end{equation*}
\end{kor}


% --- Back matter ---
%
% bibtex is used to generate the bibliography. The babplain style
% will generate numeric references (e.g. [1]) appropriate for theoretical
% computer science. If you need alphanumeric references (e.g [Tur90]), use
%
% \bibliographystyle{babalpha}
%
% instead.

\bibliographystyle{babplain-lf}
\bibliography{references-fi}


\end{document}

